<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HOLD LIFE Store</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Tajawal',sans-serif}
body{background:#070b14;color:#fff}
header{display:flex;align-items:center;justify-content:space-between;padding:20px 40px;background:#050814;border-bottom:2px solid #3e5fa8}
.logo-wrap{display:flex;align-items:center;gap:10px}
.logo{height:55px}
h1{color:#6f92d6;font-size:26px}
nav{display:flex;gap:15px}
nav button{background:#101a33;border:1px solid #3e5fa8;color:#fff;padding:8px 15px;border-radius:8px;cursor:pointer}
nav button:hover{background:#1a2850}
.container{max-width:1300px;margin:auto;padding:30px}
.server-select{background:#0d1428;padding:15px;border-radius:12px;border:1px solid #3e5fa8;margin-bottom:25px}
select{width:100%;padding:12px;border-radius:10px;border:none;background:#182448;color:#fff}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
.card{background:#0d1428;border:1px solid #3e5fa8;border-radius:14px;padding:15px;transition:.3s}
.card:hover{transform:translateY(-6px);box-shadow:0 0 25px rgba(111,146,214,.35)}
.card img{width:100%;height:160px;object-fit:cover;border-radius:10px}
.card h3{margin:10px 0;color:#6f92d6}
.price{color:#ccc;margin-bottom:10px}
button.primary{background:#6f92d6;border:none;padding:10px;border-radius:8px;color:#fff;cursor:pointer;width:100%;font-weight:bold}
button.primary:hover{background:#5578c0}
button.danger{background:#c0392b;border:none;padding:8px;border-radius:6px;color:#fff;cursor:pointer;margin-top:6px}
button.danger:hover{background:#e74c3c}
.cart{position:fixed;left:20px;bottom:20px;background:#0d1428;border:1px solid #3e5fa8;padding:15px;border-radius:12px;width:280px;max-height:400px;overflow:auto}
.cart h3{color:#6f92d6;margin-bottom:10px}
.cart-item{font-size:14px;margin-bottom:6px}
.admin-panel{display:none;margin-top:40px;background:#0d1428;padding:20px;border-radius:12px;border:1px solid #3e5fa8}
.admin-products{margin-top:20px}
.admin-item{background:#111a36;padding:10px;border-radius:8px;margin-bottom:8px}
input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:none;background:#182448;color:#fff}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center}
.modal-box{background:#0d1428;padding:25px;border-radius:12px;width:350px;border:1px solid #3e5fa8}
footer{text-align:center;padding:20px;background:#050814;margin-top:50px;color:#888}
</style>
</head>
<body>
<header>
<div class="logo-wrap">
<img src="logo.png" class="logo" />
<h1>Ù…ØªØ¬Ø± HOLD LIFE</h1>
</div>
<nav>
<button onclick="openCart()">Ø§Ù„Ø³Ù„Ø© ğŸ›’</button>
<button onclick="openAdminLogin()">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</button>
</nav>
</header>

<div class="container">

<div class="server-select">
<h3 style="margin-bottom:10px;color:#6f92d6">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙŠØ±ÙØ±</h3>
<select id="server">
<option value="HOLD LIFE #1">HOLD LIFE #1</option>
<option value="HOLD LIFE #2">HOLD LIFE #2</option>
</select>
</div>

<h2 style="margin-bottom:15px;color:#6f92d6">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø³ÙŠØ§Ø±Ø§Øª - Ø±ØªØ¨ - Ø¹Ù…Ù„Ø§Øª - Ø­Ø²Ù…)</h2>
<div class="products" id="products"></div>

<div class="admin-panel" id="adminPanel">
<h2 style="color:#6f92d6">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
<input type="text" id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input type="text" id="pprice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input type="text" id="pimage" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Discord CDN">
<input type="text" id="ptype" placeholder="Ø§Ù„Ù†ÙˆØ¹ (Ø³ÙŠØ§Ø±Ø§Øª / Ø±ØªØ¨ / Ø¹Ù…Ù„Ø§Øª / Ø­Ø²Ù…)">
<button class="primary" onclick="addProductDB()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>

<div class="admin-products">
<h3 style="margin:15px 0;color:#6f92d6">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø­Ø°Ù)</h3>
<div id="adminProductsList"></div>
</div>
</div>

</div>

<div class="cart" id="cart" style="display:none">
<h3>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
<div id="cartItems"></div>
<button class="primary" onclick="checkout()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
</div>

<div class="modal" id="loginModal">
<div class="modal-box">
<h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
<input type="password" id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button class="primary" onclick="loginAdmin()">Ø¯Ø®ÙˆÙ„</button>
</div>
</div>

<div class="modal" id="orderModal">
<div class="modal-box">
<h3>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h3>
<input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³ÙŠØ±ÙØ±">
<button class="primary" onclick="sendOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø¯Ø³ÙƒÙˆØ±Ø¯</button>
</div>
</div>

<footer>
HOLD LIFE ROLEPLAY STORE Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
</footer>

<script>
const ADMIN_PASSWORD = "9732";
const API_DB = "http://localhost:3000/api/products";
const API_DELETE = "http://localhost:3000/api/products";
const webhookURL = "https://discord.com/api/webhooks/1472643441098752000/MHrodWWKlYTBir1_Al7LYA5pcXn_ySuAnVnk3PjeFQRbU8gNXmyv3kEi8KrSjs3mec3c";

let products = [];
let cart = [];

async function loadProducts(){
try{
const res = await fetch(API_DB);
products = await res.json();
}catch{
products = [];
}
renderProducts();
renderAdminProducts();
}

function renderProducts(){
const container = document.getElementById("products");
container.innerHTML = "";
products.forEach((p,i)=>{
container.innerHTML += `
<div class="card">
<img src="${p.image}">
<h3>${p.name}</h3>
<div class="price">${p.price}$ | ${p.type}</div>
<button class="primary" onclick="addToCart(${i})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
</div>`;
});
}

function renderAdminProducts(){
const list = document.getElementById("adminProductsList");
if(!list) return;
list.innerHTML = "";
products.forEach((p,i)=>{
list.innerHTML += `
<div class="admin-item">
<strong>${p.name}</strong> - ${p.price}$ (${p.type})
<button class="danger" onclick="deleteProduct(${i})">Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬</button>
</div>`;
});
}

function addToCart(i){
cart.push(products[i]);
updateCart();
}

function updateCart(){
const el = document.getElementById("cartItems");
el.innerHTML = cart.map(p=>`<div class='cart-item'>${p.name} - ${p.price}$</div>`).join("");
}

function openCart(){
const c = document.getElementById("cart");
c.style.display = c.style.display === "none" ? "block" : "none";
}

function openAdminLogin(){
loginModal.style.display="flex";
}

function loginAdmin(){
if(document.getElementById("adminPass").value === ADMIN_PASSWORD){
loginModal.style.display="none";
document.getElementById("adminPanel").style.display="block";
}else alert("ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©");
}

async function addProductDB(){
const newProduct = {
name:pname.value,
price:pprice.value,
image:pimage.value,
type:ptype.value
};

try{
await fetch(API_DB,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(newProduct)
});
alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­");
loadProducts();
}catch(e){
alert("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ API");
}
}

async function deleteProduct(index){
if(!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ØŸ")) return;

try{
await fetch(`${API_DELETE}/${index}`,{
method:"DELETE"
});
alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬");
loadProducts();
}catch(err){
alert("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ - ØªØ£ÙƒØ¯ Ù…Ù† API");
}
}

function checkout(){
if(cart.length===0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
orderModal.style.display="flex";
}

function sendOrder(){
const username = document.getElementById("username").value;
const server = document.getElementById("server").value;

fetch(webhookURL,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
embeds:[{
title:"Ø·Ù„Ø¨ Ù…ØªØ¬Ø± HOLD LIFE",
color:5793266,
fields:[
{name:"Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨",value:username},
{name:"Ø§Ù„Ø³ÙŠØ±ÙØ±",value:server},
{name:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",value:cart.map(p=>p.name).join(", ")}
]
}]
})
});

alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­");
cart=[];
updateCart();
orderModal.style.display="none";
}

loadProducts();
</script>
</body>
</html>
